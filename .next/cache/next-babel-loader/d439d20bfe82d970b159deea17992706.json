{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\identity-managment\\\\components\\\\Content.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { Text, Link, Button, Select, Spinner, Row, Input, Image, useToasts, useModal } from '@geist-ui/react';\nimport makeStyles from './makeStyles';\nimport EventListItem from './EventListItem.js';\nimport SearchResultsModal from './modals/SearchResults';\nimport PortfolioCard from './PortfolioCard';\nimport Portfolio from './modals/Portfolio';\nimport Loader from './modals/Loader'; // import {\n//   getLoginUser,\n//   getAllUsers,\n//   requestPortfolio,\n//   sharePortfolio,\n//   checkEmailExists, rejectPortfolioRequest,\n// } from '../lib/threadDb';\n\nimport * as Icons from 'react-feather';\nvar useStyles = makeStyles(function (ui) {\n  var _ref;\n\n  return _ref = {\n    root: {\n      backgroundColor: ui.background\n    },\n    content: {\n      width: ui.layout.pageWidthWithMargin,\n      maxWidth: '100%',\n      boxSizing: 'border-box',\n      margin: '0 auto',\n      padding: \"calc(\".concat(ui.layout.gap, \" * 2) \").concat(ui.layout.pageMargin, \" calc(\").concat(ui.layout.gap, \" * 4)\"),\n      transform: 'translateY(-35px)'\n    },\n    invite: {\n      display: 'flex'\n    },\n    inviteHeading: {\n      marginBottom: 18,\n      fontSize: '14px !important'\n    },\n    row: {\n      display: 'flex',\n      flexDirection: 'column',\n      position: 'relative',\n      minWidth: 1,\n      maxWidth: '100%',\n      flex: 1,\n      justifyContent: 'flex-start',\n      alignItems: 'stretch'\n    },\n    projects: {\n      width: '100%'\n    },\n    textRoot: {\n      borderBottom: \"solid 1px \".concat(ui.palette.accents_2),\n      padding: '10px 0px',\n      alignItems: 'center',\n      display: 'flex',\n      fontSize: 14\n    },\n    message: {\n      fontSize: '14px !important',\n      margin: 0,\n      flex: 1\n    },\n    activity: {\n      flex: 1\n    }\n  }, _defineProperty(_ref, \"@media screen and (min-width: \".concat(ui.layout.pageWidthWithMargin, \")\"), {\n    row: {\n      flexDirection: 'row',\n      flexWrap: 'wrap'\n    },\n    projects: {\n      width: 540,\n      maxWidth: '100%',\n      marginRight: 80\n    },\n    activityTitle: {\n      marginTop: '20 !important',\n      fontSize: '14px !important',\n      textAlign: 'start !important'\n    },\n    viewAll: {\n      marginBottom: '0 !important',\n      textAlign: 'start !important'\n    },\n    invite: {\n      display: 'flex',\n      justifyContent: 'space-between'\n    }\n  }), _defineProperty(_ref, \"viewAll\", {\n    fontSize: 14,\n    fontWeight: 700,\n    marginBottom: ui.layout.gap,\n    textAlign: 'center'\n  }), _defineProperty(_ref, \"activityTitle\", {\n    fontWeight: 700,\n    marginTop: ui.layout.gap,\n    fontSize: 24,\n    textAlign: 'center'\n  }), _defineProperty(_ref, \"btnAccept\", {\n    marginRight: '8px'\n  }), _ref;\n});\n\nvar Content = function Content(_ref2) {\n  _s();\n\n  var idx = _ref2.idx,\n      user = _ref2.user,\n      userData = _ref2.userData;\n\n  var _useState = useState(null),\n      caller = _useState[0],\n      setCaller = _useState[1];\n\n  var _useState2 = useState([{}]),\n      userArray = _useState2[0],\n      setUserArray = _useState2[1];\n\n  var _useState3 = useState([]),\n      requested = _useState3[0],\n      setRequested = _useState3[1];\n\n  var _useState4 = useState([]),\n      requests = _useState4[0],\n      setRequests = _useState4[1];\n\n  var _useState5 = useState([]),\n      sharedPortfolio = _useState5[0],\n      setSharedPortfolio = _useState5[1];\n\n  var _useState6 = useState({}),\n      selectedPortfolio = _useState6[0],\n      setSelectedPortfolio = _useState6[1];\n\n  var _useState7 = useState(false),\n      portfolioModal = _useState7[0],\n      setPortfolioModal = _useState7[1];\n\n  var _useState8 = useState(false),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useState9 = useState({}),\n      loaderData = _useState9[0],\n      setLoaderData = _useState9[1];\n\n  var _useState10 = useState(''),\n      searchUser = _useState10[0],\n      setSearchUser = _useState10[1];\n\n  var _useState11 = useState(''),\n      userEmail = _useState11[0],\n      setUserEmail = _useState11[1];\n\n  var _useState12 = useState(null),\n      reciverDetails = _useState12[0],\n      setReciverDetails = _useState12[1];\n\n  var _useState13 = useState(false),\n      searchResults = _useState13[0],\n      setSearchResults = _useState13[1];\n\n  var _useToasts = useToasts(),\n      _useToasts2 = _slicedToArray(_useToasts, 2),\n      setToast = _useToasts2[1];\n\n  console.log('SEARCHRESULTS', searchResults);\n  useEffect(function () {\n    function load() {\n      return _load.apply(this, arguments);\n    }\n\n    function _load() {\n      _load = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _user, _yield$getAllUsers, _userArray, _caller;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(idx && user === 2)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                setRequested(userData.requested);\n                setRequests(userData.requests);\n                setSharedPortfolio(userData.sharedData);\n                _user = JSON.parse(localStorage.getItem('USER'));\n                _context.next = 7;\n                return getAllUsers(_user.did);\n\n              case 7:\n                _yield$getAllUsers = _context.sent;\n                _userArray = _yield$getAllUsers.userArray;\n                _caller = _yield$getAllUsers.caller;\n                console.log('caller', _caller);\n                setCaller(userData);\n                setUserArray(_userArray);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _load.apply(this, arguments);\n    }\n\n    load();\n  }, [idx, user]);\n\n  var _onClickCard = function onClickCard(portfolio) {\n    console.log(portfolio);\n    setSelectedPortfolio(portfolio);\n    setPortfolioModal(true);\n  };\n\n  var handleClick = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _yield$checkEmailExis, status, _user2;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoaderData({\n                heading: 'Searching User',\n                content: 'Searching user'\n              });\n              setLoading(true);\n\n              if (!(searchUser !== caller.email)) {\n                _context2.next = 11;\n                break;\n              }\n\n              _context2.next = 5;\n              return checkEmailExists(searchUser);\n\n            case 5:\n              _yield$checkEmailExis = _context2.sent;\n              status = _yield$checkEmailExis.status;\n              _user2 = _yield$checkEmailExis.user;\n\n              if (!status) {\n                setLoading(false);\n                setSearchResults(true);\n                setUserEmail(_user2.name);\n                setReciverDetails(_user2);\n                console.log('User EMAILLLLL', userEmail);\n              } else {\n                setLoading(false);\n                setToast({\n                  text: 'User not found, please check the Email ID',\n                  type: 'warning'\n                });\n              }\n\n              _context2.next = 13;\n              break;\n\n            case 11:\n              setLoading(false);\n              setToast({\n                text: 'Please enter valid email',\n                type: 'warning'\n              });\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleClick() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var fetchUserDetails = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var userData;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setLoaderData({\n                heading: 'Fetch portfolio',\n                content: 'Fetching portfolio'\n              });\n              setLoading(true);\n              _context3.next = 4;\n              return getLoginUser(idx.id);\n\n            case 4:\n              userData = _context3.sent;\n              setRequested(userData.requested);\n              setRequests(userData.requests);\n              setSharedPortfolio(userData.sharedData);\n              setLoading(false);\n\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function fetchUserDetails() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleAccept = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(receiver) {\n      var docId, user, dec, encKey;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setLoading(true);\n              setLoaderData({\n                heading: 'Accept Portfolio Request',\n                content: 'Accepting portfolio request'\n              });\n              docId = localStorage.getItem('docId');\n              user = JSON.parse(localStorage.getItem('USER'));\n              _context4.next = 6;\n              return idx.ceramic.did.decryptDagJWE(user.aesKey);\n\n            case 6:\n              dec = _context4.sent;\n              _context4.next = 9;\n              return idx.ceramic.did.createDagJWE(dec, [receiver.senderDid]);\n\n            case 9:\n              encKey = _context4.sent;\n              _context4.next = 12;\n              return sharePortfolio(caller, receiver, docId, encKey, receiver.requestId);\n\n            case 12:\n              setLoading(false);\n\n            case 13:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleAccept(_x) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var handleReject = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(receiver) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              setLoading(true);\n              setLoaderData({\n                heading: 'Reject Portfolio Request',\n                content: 'Rejecting portfolio request'\n              });\n              _context5.next = 4;\n              return rejectPortfolioRequest(caller, receiver.requestId);\n\n            case 4:\n              setLoading(false);\n\n            case 5:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function handleReject(_x2) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var classes = useStyles();\n  return __jsx(React.Fragment, null, __jsx(Loader, {\n    loading: loading,\n    heading: loaderData.heading,\n    content: loaderData.content,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }\n  }), __jsx(SearchResultsModal, {\n    avatar: \"/assets/avatar.png\",\n    searchResults: searchResults,\n    setSearchResults: setSearchResults,\n    userEmail: userEmail,\n    reciverDetails: reciverDetails,\n    caller: caller,\n    requested: requested,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }\n  }), __jsx(Portfolio, {\n    state: portfolioModal,\n    idx: idx,\n    portfolio: selectedPortfolio,\n    setPortfolioModal: setPortfolioModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: classes.content,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 11\n    }\n  }, __jsx(Text, {\n    h3: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }\n  }, \"All portfolios\"), __jsx(Button // aria-label='Toggle Dark mode'\n  // className={classes.themeIcon}\n  , {\n    auto: true,\n    type: \"abort\",\n    onClick: fetchUserDetails,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }\n  }, __jsx(Icons.RefreshCcw, {\n    size: 16,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 15\n    }\n  }))), __jsx(\"div\", {\n    className: classes.row,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: classes.projects,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 13\n    }\n  }, sharedPortfolio.length > 0 ? sharedPortfolio.map(function (value) {\n    return __jsx(PortfolioCard, {\n      name: value.senderName,\n      address: value.senderDid,\n      email: value.senderEmail,\n      onClickCard: function onClickCard() {\n        _onClickCard(value);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 21\n      }\n    });\n  }) : // <Text>No shared portfolios</Text>\n  __jsx(\"div\", {\n    style: {\n      background: '#fff',\n      padding: '24px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }, __jsx(Image, {\n    src: \"/assets/portfolioNotFound.svg\",\n    alt: \"No Shared Portfolios\",\n    width: 350,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 19\n    }\n  }))), __jsx(\"div\", {\n    className: classes.activity,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }\n  }, __jsx(Text, {\n    h2: true,\n    className: classes.inviteHeading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 15\n    }\n  }, \"Request User Portfolio\"), __jsx(\"div\", {\n    className: classes.invite,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    type: \"email\",\n    placeholder: \"Search user by Email\",\n    value: searchUser,\n    onChange: function onChange(e) {\n      return setSearchUser(e.target.value);\n    },\n    style: {\n      width: '230px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 17\n    }\n  }), __jsx(Button, {\n    size: \"small\",\n    auto: true,\n    icon: __jsx(Icons.Search, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 25\n      }\n    }),\n    type: \"secondary\",\n    onClick: handleClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 17\n    }\n  }, \"Search\")), __jsx(Text, {\n    h2: true,\n    className: classes.activityTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 15\n    }\n  }, \"Recent Activities\"), requested.length > 0 ? requested.map(function (value) {\n    return __jsx(EventListItem, {\n      username: \"ofekashery\",\n      avatar: \"/assets/avatar.png\",\n      created: \"3d\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 21\n      }\n    }, \"Requested \", __jsx(\"b\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 33\n      }\n    }, value.name, \"'s\"), \" Portfolio access.\");\n  }) : __jsx(Text, {\n    className: classes.message,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 17\n    }\n  }, \"No activity\"), __jsx(Text, {\n    className: classes.viewAll,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 15\n    }\n  }, __jsx(Link, {\n    color: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 17\n    }\n  }, \"View more\")), __jsx(Text, {\n    h2: true,\n    className: classes.activityTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 15\n    }\n  }, \"All Requests\"), requests.length > 0 ? requests.map(function (value) {\n    return __jsx(EventListItem, {\n      username: \"ofekashery\",\n      avatar: \"/assets/avatar.png\",\n      created: \"3d\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 21\n      }\n    }, __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 23\n      }\n    }, __jsx(\"b\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 25\n      }\n    }, value.name), \" requested portfolio access.\"), __jsx(\"div\", {\n      className: classes.btn,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 23\n      }\n    }, __jsx(Button, {\n      size: \"small\",\n      auto: true,\n      type: \"success\",\n      onClick: function onClick() {\n        return handleAccept(value);\n      },\n      className: classes.btnAccept,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 25\n      }\n    }, \"Accept\"), __jsx(Button, {\n      size: \"small\",\n      auto: true,\n      onClick: function onClick() {\n        return handleReject(value);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 25\n      }\n    }, \"Reject\")));\n  }) : __jsx(Text, {\n    className: classes.message,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 17\n    }\n  }, \"No activity\"))))));\n};\n\n_s(Content, \"XnCnm4JLAdHV9OfLdiBwtvWP/mk=\", false, function () {\n  return [useToasts, useStyles];\n});\n\n_c = Content;\nexport default Content;\n\nvar _c;\n\n$RefreshReg$(_c, \"Content\");","map":{"version":3,"sources":["D:/identity-managment/components/Content.js"],"names":["React","useState","useEffect","Text","Link","Button","Select","Spinner","Row","Input","Image","useToasts","useModal","makeStyles","EventListItem","SearchResultsModal","PortfolioCard","Portfolio","Loader","Icons","useStyles","ui","root","backgroundColor","background","content","width","layout","pageWidthWithMargin","maxWidth","boxSizing","margin","padding","gap","pageMargin","transform","invite","display","inviteHeading","marginBottom","fontSize","row","flexDirection","position","minWidth","flex","justifyContent","alignItems","projects","textRoot","borderBottom","palette","accents_2","message","activity","flexWrap","marginRight","activityTitle","marginTop","textAlign","viewAll","fontWeight","Content","idx","user","userData","caller","setCaller","userArray","setUserArray","requested","setRequested","requests","setRequests","sharedPortfolio","setSharedPortfolio","selectedPortfolio","setSelectedPortfolio","portfolioModal","setPortfolioModal","loading","setLoading","loaderData","setLoaderData","searchUser","setSearchUser","userEmail","setUserEmail","reciverDetails","setReciverDetails","searchResults","setSearchResults","setToast","console","log","load","sharedData","JSON","parse","localStorage","getItem","getAllUsers","did","onClickCard","portfolio","handleClick","heading","email","checkEmailExists","status","name","text","type","fetchUserDetails","getLoginUser","id","handleAccept","receiver","docId","ceramic","decryptDagJWE","aesKey","dec","createDagJWE","senderDid","encKey","sharePortfolio","requestId","handleReject","rejectPortfolioRequest","classes","length","map","value","senderName","senderEmail","e","target","btn","btnAccept"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport {\r\n  Text,\r\n  Link,\r\n  Button,\r\n  Select,\r\n  Spinner,\r\n  Row,\r\n  Input,\r\n  Image,\r\n  useToasts,\r\n  useModal,\r\n} from '@geist-ui/react';\r\n\r\nimport makeStyles from './makeStyles';\r\nimport EventListItem from './EventListItem.js';\r\nimport SearchResultsModal from './modals/SearchResults';\r\nimport PortfolioCard from './PortfolioCard';\r\nimport Portfolio from './modals/Portfolio';\r\nimport Loader from './modals/Loader';\r\n// import {\r\n//   getLoginUser,\r\n//   getAllUsers,\r\n//   requestPortfolio,\r\n//   sharePortfolio,\r\n//   checkEmailExists, rejectPortfolioRequest,\r\n// } from '../lib/threadDb';\r\nimport * as Icons from 'react-feather';\r\n\r\nconst useStyles = makeStyles((ui) => ({\r\n  root: {\r\n    backgroundColor: ui.background,\r\n  },\r\n  content: {\r\n    width: ui.layout.pageWidthWithMargin,\r\n    maxWidth: '100%',\r\n    boxSizing: 'border-box',\r\n    margin: '0 auto',\r\n    padding: `calc(${ui.layout.gap} * 2) ${ui.layout.pageMargin} calc(${ui.layout.gap} * 4)`,\r\n    transform: 'translateY(-35px)',\r\n  },\r\n  invite: {\r\n    display: 'flex',\r\n  },\r\n  inviteHeading: {\r\n    marginBottom: 18,\r\n    fontSize: '14px !important',\r\n  },\r\n  row: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    position: 'relative',\r\n    minWidth: 1,\r\n    maxWidth: '100%',\r\n    flex: 1,\r\n    justifyContent: 'flex-start',\r\n    alignItems: 'stretch',\r\n  },\r\n  projects: {\r\n    width: '100%',\r\n  },\r\n  textRoot: {\r\n    borderBottom: `solid 1px ${ui.palette.accents_2}`,\r\n    padding: '10px 0px',\r\n    alignItems: 'center',\r\n    display: 'flex',\r\n    fontSize: 14,\r\n  },\r\n  message: {\r\n    fontSize: '14px !important',\r\n    margin: 0,\r\n    flex: 1,\r\n  },\r\n  activity: {\r\n    flex: 1,\r\n  },\r\n  [`@media screen and (min-width: ${ui.layout.pageWidthWithMargin})`]: {\r\n    row: {\r\n      flexDirection: 'row',\r\n      flexWrap: 'wrap',\r\n    },\r\n    projects: {\r\n      width: 540,\r\n      maxWidth: '100%',\r\n      marginRight: 80,\r\n    },\r\n    activityTitle: {\r\n      marginTop: '20 !important',\r\n\r\n      fontSize: '14px !important',\r\n      textAlign: 'start !important',\r\n    },\r\n    viewAll: {\r\n      marginBottom: '0 !important',\r\n      textAlign: 'start !important',\r\n    },\r\n    invite: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n    },\r\n  },\r\n  viewAll: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n    marginBottom: ui.layout.gap,\r\n    textAlign: 'center',\r\n  },\r\n  activityTitle: {\r\n    fontWeight: 700,\r\n    marginTop: ui.layout.gap,\r\n    fontSize: 24,\r\n    textAlign: 'center',\r\n  },\r\n\r\n  btnAccept: {\r\n    marginRight: '8px',\r\n  },\r\n}));\r\n\r\nconst Content = ({ idx, user, userData }) => {\r\n  const [caller, setCaller] = useState(null);\r\n  const [userArray, setUserArray] = useState([{}]);\r\n\r\n  const [requested, setRequested] = useState([]);\r\n  const [requests, setRequests] = useState([]);\r\n  const [sharedPortfolio, setSharedPortfolio] = useState([]);\r\n  const [selectedPortfolio, setSelectedPortfolio] = useState({});\r\n  const [portfolioModal, setPortfolioModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loaderData, setLoaderData] = useState({});\r\n  const [searchUser, setSearchUser] = useState('');\r\n  const [userEmail, setUserEmail] = useState('');\r\n  const [reciverDetails, setReciverDetails] = useState(null);\r\n\r\n  const [searchResults, setSearchResults] = useState(false);\r\n  const [, setToast] = useToasts();\r\n\r\n  console.log('SEARCHRESULTS', searchResults);\r\n  useEffect(() => {\r\n    async function load() {\r\n      if (idx && user === 2) {\r\n        setRequested(userData.requested);\r\n        setRequests(userData.requests);\r\n        setSharedPortfolio(userData.sharedData);\r\n\r\n        const user = JSON.parse(localStorage.getItem('USER'));\r\n        const { userArray, caller } = await getAllUsers(user.did);\r\n        console.log('caller', caller);\r\n        setCaller(userData);\r\n        setUserArray(userArray);\r\n      }\r\n    }\r\n    load();\r\n  }, [idx, user]);\r\n\r\n  const onClickCard = (portfolio) => {\r\n    console.log(portfolio);\r\n    setSelectedPortfolio(portfolio);\r\n    setPortfolioModal(true);\r\n  };\r\n\r\n  const handleClick = async () => {\r\n    setLoaderData({\r\n      heading: 'Searching User',\r\n      content: 'Searching user',\r\n    });\r\n    setLoading(true);\r\n\r\n    if (searchUser !== caller.email) {\r\n      const { status, user } = await checkEmailExists(searchUser);\r\n      if (!status) {\r\n        setLoading(false);\r\n        setSearchResults(true);\r\n\r\n        setUserEmail(user.name);\r\n        setReciverDetails(user);\r\n        console.log('User EMAILLLLL', userEmail);\r\n      } else {\r\n        setLoading(false);\r\n        setToast({\r\n          text: 'User not found, please check the Email ID',\r\n          type: 'warning',\r\n        });\r\n      }\r\n    } else {\r\n      setLoading(false);\r\n      setToast({\r\n        text: 'Please enter valid email',\r\n        type: 'warning',\r\n      });\r\n    }\r\n  };\r\n\r\n  const fetchUserDetails = async () => {\r\n    setLoaderData({\r\n      heading: 'Fetch portfolio',\r\n      content: 'Fetching portfolio',\r\n    });\r\n    setLoading(true);\r\n    const userData = await getLoginUser(idx.id);\r\n    setRequested(userData.requested);\r\n    setRequests(userData.requests);\r\n    setSharedPortfolio(userData.sharedData);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleAccept = async (receiver) => {\r\n    setLoading(true);\r\n    setLoaderData({\r\n      heading: 'Accept Portfolio Request',\r\n      content: 'Accepting portfolio request',\r\n    });\r\n    const docId = localStorage.getItem('docId');\r\n    const user = JSON.parse(localStorage.getItem('USER'));\r\n    const dec = await idx.ceramic.did.decryptDagJWE(user.aesKey);\r\n    const encKey = await idx.ceramic.did.createDagJWE(dec, [\r\n      receiver.senderDid,\r\n    ]);\r\n    await sharePortfolio(caller, receiver, docId, encKey, receiver.requestId);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleReject = async (receiver) => {\r\n    setLoading(true);\r\n    setLoaderData({\r\n      heading: 'Reject Portfolio Request',\r\n      content: 'Rejecting portfolio request',\r\n    });\r\n    await rejectPortfolioRequest(caller, receiver.requestId);\r\n    setLoading(false);\r\n  };\r\n\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <Loader\r\n        loading={loading}\r\n        heading={loaderData.heading}\r\n        content={loaderData.content}\r\n      />\r\n      <SearchResultsModal\r\n        avatar='/assets/avatar.png'\r\n        searchResults={searchResults}\r\n        setSearchResults={setSearchResults}\r\n        userEmail={userEmail}\r\n        reciverDetails={reciverDetails}\r\n        caller={caller}\r\n        requested={requested}\r\n      />\r\n      {/* <TestModal searchResults={searchResults} /> */}\r\n      <Portfolio\r\n        state={portfolioModal}\r\n        idx={idx}\r\n        portfolio={selectedPortfolio}\r\n        setPortfolioModal={setPortfolioModal}\r\n      />\r\n      <div className={classes.root}>\r\n        <div className={classes.content}>\r\n          <Row>\r\n            <Text h3>All portfolios</Text>\r\n            <Button\r\n              // aria-label='Toggle Dark mode'\r\n              // className={classes.themeIcon}\r\n              auto\r\n              type='abort'\r\n              onClick={fetchUserDetails}\r\n            >\r\n              <Icons.RefreshCcw size={16} />\r\n            </Button>\r\n          </Row>\r\n          <div className={classes.row}>\r\n            <div className={classes.projects}>\r\n              {sharedPortfolio.length > 0 ? (\r\n                sharedPortfolio.map((value) => {\r\n                  return (\r\n                    <PortfolioCard\r\n                      name={value.senderName}\r\n                      address={value.senderDid}\r\n                      email={value.senderEmail}\r\n                      onClickCard={() => {\r\n                        onClickCard(value);\r\n                      }}\r\n                    />\r\n                  );\r\n                })\r\n              ) : (\r\n                // <Text>No shared portfolios</Text>\r\n                <div style={{ background: '#fff', padding: '24px' }}>\r\n                  <Image\r\n                    src='/assets/portfolioNotFound.svg'\r\n                    alt='No Shared Portfolios'\r\n                    width={350}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* right- */}\r\n\r\n            <div className={classes.activity}>\r\n              <Text h2 className={classes.inviteHeading}>\r\n                Request User Portfolio\r\n              </Text>\r\n              <div className={classes.invite}>\r\n                <Input\r\n                  type='email'\r\n                  placeholder='Search user by Email'\r\n                  value={searchUser}\r\n                  onChange={(e) => setSearchUser(e.target.value)}\r\n                  style={{ width: '230px' }}\r\n                />\r\n                <Button\r\n                  size='small'\r\n                  auto\r\n                  icon={<Icons.Search />}\r\n                  type='secondary'\r\n                  onClick={handleClick}\r\n                >\r\n                  Search\r\n                </Button>\r\n              </div>\r\n\r\n              <Text h2 className={classes.activityTitle}>\r\n                Recent Activities\r\n              </Text>\r\n\r\n              {requested.length > 0 ? (\r\n                requested.map((value) => {\r\n                  return (\r\n                    <EventListItem\r\n                      username='ofekashery'\r\n                      avatar='/assets/avatar.png'\r\n                      created='3d'\r\n                    >\r\n                      Requested <b>{value.name}'s</b> Portfolio access.\r\n                    </EventListItem>\r\n                  );\r\n                })\r\n              ) : (\r\n                <Text className={classes.message}>No activity</Text>\r\n              )}\r\n              <Text className={classes.viewAll}>\r\n                <Link color>View more</Link>\r\n              </Text>\r\n\r\n              <Text h2 className={classes.activityTitle}>\r\n                All Requests\r\n              </Text>\r\n\r\n              {requests.length > 0 ? (\r\n                requests.map((value) => {\r\n                  return (\r\n                    <EventListItem\r\n                      username='ofekashery'\r\n                      avatar='/assets/avatar.png'\r\n                      created='3d'\r\n                    >\r\n                      <p>\r\n                        <b>{value.name}</b> requested portfolio access.\r\n                      </p>\r\n                      <div className={classes.btn}>\r\n                        <Button\r\n                          size='small'\r\n                          auto\r\n                          type='success'\r\n                          onClick={() => handleAccept(value)}\r\n                          className={classes.btnAccept}\r\n                        >\r\n                          Accept\r\n                        </Button>\r\n                        <Button\r\n                          size='small'\r\n                          auto\r\n                          onClick={() => handleReject(value)}\r\n                        >\r\n                          Reject\r\n                        </Button>\r\n                      </div>\r\n                    </EventListItem>\r\n                  );\r\n                })\r\n              ) : (\r\n                <Text className={classes.message}>No activity</Text>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Content;\r\n"]},"metadata":{},"sourceType":"module"}