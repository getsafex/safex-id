{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\identity-managment\\\\components\\\\Profile\\\\Profile.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { Avatar, Button, Text, Link, Row } from '@geist-ui/react';\nimport makeStyles from '../makeStyles';\nimport * as Icons from 'react-feather';\nimport ProfileCard from './ProfileCard';\nimport AddressModal from './AddressModal';\nimport EditProfile from '../modals/EditProfile';\nimport Loader from '../modals/Loader';\nimport { definitions } from '../../utils/config.json'; //import { decryptData, encryptData } from '../../lib/threadDb';\n\nvar useStyles = makeStyles(function (ui) {\n  var _ref;\n\n  return _ref = {\n    root: {\n      borderBottom: \"solid 1px \".concat(ui.palette.accents_2),\n      backgroundColor: ui.background\n    },\n    content: {\n      display: 'flex',\n      flexDirection: 'row',\n      width: ui.layout.pageWidthWithMargin,\n      maxWidth: '100%',\n      padding: \"calc(\".concat(ui.layout.gap, \" * 2) \").concat(ui.layout.pageMargin, \" calc(\").concat(ui.layout.gap, \" * 4)\"),\n      boxSizing: 'border-box',\n      margin: '0 auto',\n      borderBottom: \"solid 1px \".concat(ui.palette.accents_2)\n    },\n    avatar: {\n      width: '100px !important',\n      height: '100px !important',\n      marginRight: '30px !important'\n    },\n    name: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n      flex: 1\n    },\n    title: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'space-between'\n    },\n    username: {\n      lineHeight: 1\n    },\n    createProjectButton: {\n      marginLeft: '16px !important'\n    },\n    editProfile: {\n      minWidth: '191px'\n    }\n  }, _defineProperty(_ref, \"@media screen and (max-width: \".concat(ui.layout.pageWidthWithMargin, \")\"), {\n    createProjectButton: {\n      display: 'none !important'\n    },\n    avatar: {\n      width: '80px !important',\n      height: '80px !important',\n      marginRight: '20px !important'\n    },\n    username: {\n      fontSize: 24\n    }\n  }), _defineProperty(_ref, \"projects\", {\n    // width: '1040px !important',\n    width: 'auto',\n    maxWidth: '100%'\n  }), _defineProperty(_ref, \"integrationsTitle\", {\n    textTransform: 'uppercase',\n    color: \"\".concat(ui.palette.accents_5, \" !important\"),\n    fontWeight: 500,\n    fontSize: 12,\n    margin: 0\n  }), _defineProperty(_ref, \"integrationsUsername\", {\n    margin: '0 0 0 4px',\n    fontWeight: 0\n  }), _defineProperty(_ref, \"crypto\", {\n    width: '50px !important',\n    height: '50px !important',\n    marginRight: '25px !important'\n  }), _defineProperty(_ref, \"heading\", {\n    display: 'flex',\n    flexDirection: 'row',\n    width: ui.layout.pageWidthWithMargin,\n    paddingLeft: 23.333,\n    boxSizing: 'border-box',\n    margin: '0 auto'\n  }), _ref;\n});\n\nvar Profile = function Profile(_ref2) {\n  _s();\n\n  var idx = _ref2.idx,\n      userData = _ref2.userData;\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      modal = _useState[0],\n      setModal = _useState[1];\n\n  var _useState2 = useState([]),\n      addressArray = _useState2[0],\n      setAddress = _useState2[1];\n\n  var _useState3 = useState(null),\n      aesKey = _useState3[0],\n      setAesKey = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      editName = _useState5[0],\n      setEditName = _useState5[1]; // useEffect(() => {\n  //   async function fetch() {\n  //     try {\n  //       if (idx) {\n  //         const res = JSON.parse(localStorage.getItem('USER'));\n  //         const dec = await idx.ceramic.did.decryptDagJWE(res.aesKey);\n  //         setAesKey(dec);\n  //         const [addressList] = await Promise.all([\n  //           idx.get(definitions.portfolio, idx.id),\n  //         ]);\n  //         console.log(addressList);\n  //         if (addressList) {\n  //           const decryptedData = await decryptData(\n  //             Buffer.from(addressList.portfolio, 'hex'),\n  //             dec\n  //           );\n  //           console.log(JSON.parse(decryptedData.toString('utf8')));\n  //           addressList\n  //             ? setAddress(JSON.parse(decryptedData.toString('utf8')))\n  //             : setAddress([]);\n  //         } else {\n  //           setAddress([]);\n  //         }\n  //       }\n  //     } catch (err) {\n  //       console.log(err);\n  //     }\n  //   }\n  //   fetch();\n  // }, [idx]);\n  // const addAddress = async (newAddress) => {\n  //   setLoading(true);\n  //   setModal(false);\n  //   const newAddresses = [...addressArray, newAddress];\n  //   const encryptedData = await encryptData(\n  //     Buffer.from(JSON.stringify(newAddresses)),\n  //     aesKey\n  //   );\n  //   console.log(encryptedData);\n  //   setAddress(newAddresses);\n  //   const docId = await idx.set(definitions.portfolio, {\n  //     portfolio: encryptedData.toString('hex'),\n  //   });\n  //   localStorage.setItem('docId', docId.toString());\n  //   setLoading(false);\n  // };\n\n\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }\n  }, __jsx(Loader, {\n    loading: loading,\n    heading: 'Add address',\n    content: 'Adding address',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }), __jsx(AddressModal, {\n    modal: modal,\n    setModal: setModal,\n    addAddress: addAddress,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }), __jsx(EditProfile, {\n    editName: editName,\n    setEditName: setEditName,\n    email: userData.email,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, userData ? __jsx(\"div\", {\n    className: classes.content,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, __jsx(Avatar, {\n    alt: \"Your Avatar\",\n    className: classes.avatar,\n    src: \"/assets/avatar.png\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: classes.name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: classes.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, __jsx(Text, {\n    h2: true,\n    className: classes.username,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, userData.name), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    className: classes.editProfile,\n    type: \"primary\",\n    auto: true,\n    icon: __jsx(Icons.Edit, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 27\n      }\n    }),\n    onClick: function onClick() {\n      return setEditName(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 19\n    }\n  }, \"Edit Profile\"), __jsx(Button, {\n    className: classes.createProjectButton,\n    type: \"secondary\",\n    auto: true,\n    icon: __jsx(Icons.Plus, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 27\n      }\n    }),\n    onClick: function onClick() {\n      return setModal(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 19\n    }\n  }, \"Add New Address\"))), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, __jsx(Icons.Mail, {\n    size: 16,\n    \"aria-label\": \"Email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 19\n    }\n  }), __jsx(Text, {\n    className: classes.integrationsUsername,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 19\n    }\n  }, userData.email)), __jsx(Link, {\n    href: \"https://github.com/consensolabs\",\n    target: \"_blank\",\n    rel: \"noopener\",\n    underline: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 19\n    }\n  }))))) : __jsx(Row, {\n    style: {\n      padding: '10px 0'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 11\n    }\n  }, \":\", __jsx(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 14\n    }\n  }, \" No user data found\")), __jsx(\"div\", {\n    className: classes.heading,\n    style: {\n      marginBottom: '0px',\n      height: '0px',\n      background: 'red',\n      marginTop: '18px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }\n  }, __jsx(Text, {\n    h4: true,\n    className: classes.username,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }, \"My Portfolio Accounts\")), __jsx(\"div\", {\n    className: classes.content,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: classes.projects,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 11\n    }\n  }, addressArray.length > 0 ? addressArray.map(function (add, index) {\n    console.log(add);\n    return __jsx(ProfileCard, {\n      address: add.address,\n      name: add.chain,\n      addAddress: addAddress,\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 19\n      }\n    });\n  }) : __jsx(Row, {\n    style: {\n      padding: '10px 0'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 15\n    }\n  }, __jsx(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 17\n    }\n  }, \"No Portfolios Found\"))))));\n};\n\n_s(Profile, \"zhmEUUoR3Wq8XYdcE/ufO/vpiSE=\", false, function () {\n  return [useStyles];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["D:/identity-managment/components/Profile/Profile.js"],"names":["React","useState","useEffect","Avatar","Button","Text","Link","Row","makeStyles","Icons","ProfileCard","AddressModal","EditProfile","Loader","definitions","useStyles","ui","root","borderBottom","palette","accents_2","backgroundColor","background","content","display","flexDirection","width","layout","pageWidthWithMargin","maxWidth","padding","gap","pageMargin","boxSizing","margin","avatar","height","marginRight","name","justifyContent","flex","title","username","lineHeight","createProjectButton","marginLeft","editProfile","minWidth","fontSize","textTransform","color","accents_5","fontWeight","paddingLeft","Profile","idx","userData","classes","modal","setModal","addressArray","setAddress","aesKey","setAesKey","loading","setLoading","editName","setEditName","addAddress","email","alignItems","integrationsUsername","heading","marginBottom","marginTop","projects","length","map","add","index","console","log","address","chain"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Avatar, Button, Text, Link, Row } from '@geist-ui/react';\r\nimport makeStyles from '../makeStyles';\r\nimport * as Icons from 'react-feather';\r\nimport ProfileCard from './ProfileCard';\r\nimport AddressModal from './AddressModal';\r\nimport EditProfile from '../modals/EditProfile';\r\nimport Loader from '../modals/Loader';\r\nimport { definitions } from '../../utils/config.json';\r\n//import { decryptData, encryptData } from '../../lib/threadDb';\r\n\r\nconst useStyles = makeStyles((ui) => ({\r\n  root: {\r\n    borderBottom: `solid 1px ${ui.palette.accents_2}`,\r\n    backgroundColor: ui.background,\r\n  },\r\n  content: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    width: ui.layout.pageWidthWithMargin,\r\n    maxWidth: '100%',\r\n    padding: `calc(${ui.layout.gap} * 2) ${ui.layout.pageMargin} calc(${ui.layout.gap} * 4)`,\r\n    boxSizing: 'border-box',\r\n    margin: '0 auto',\r\n    borderBottom: `solid 1px ${ui.palette.accents_2}`,\r\n  },\r\n  avatar: {\r\n    width: '100px !important',\r\n    height: '100px !important',\r\n    marginRight: '30px !important',\r\n  },\r\n  name: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    flex: 1,\r\n  },\r\n  title: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n  },\r\n  username: {\r\n    lineHeight: 1,\r\n  },\r\n  createProjectButton: {\r\n    marginLeft: '16px !important',\r\n  },\r\n  editProfile: {\r\n    minWidth: '191px',\r\n  },\r\n  [`@media screen and (max-width: ${ui.layout.pageWidthWithMargin})`]: {\r\n    createProjectButton: {\r\n      display: 'none !important',\r\n    },\r\n    avatar: {\r\n      width: '80px !important',\r\n      height: '80px !important',\r\n      marginRight: '20px !important',\r\n    },\r\n    username: {\r\n      fontSize: 24,\r\n    },\r\n  },\r\n  projects: {\r\n    // width: '1040px !important',\r\n    width: 'auto',\r\n    maxWidth: '100%',\r\n  },\r\n  integrationsTitle: {\r\n    textTransform: 'uppercase',\r\n    color: `${ui.palette.accents_5} !important`,\r\n    fontWeight: 500,\r\n    fontSize: 12,\r\n    margin: 0,\r\n  },\r\n  integrationsUsername: {\r\n    margin: '0 0 0 4px',\r\n    fontWeight: 0,\r\n  },\r\n  crypto: {\r\n    width: '50px !important',\r\n    height: '50px !important',\r\n    marginRight: '25px !important',\r\n  },\r\n  heading: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    width: ui.layout.pageWidthWithMargin,\r\n    paddingLeft: 23.333,\r\n    boxSizing: 'border-box',\r\n    margin: '0 auto',\r\n  },\r\n}));\r\n\r\nconst Profile = ({ idx, userData }) => {\r\n  const classes = useStyles();\r\n  const [modal, setModal] = useState(false);\r\n  const [addressArray, setAddress] = useState([]);\r\n  const [aesKey, setAesKey] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [editName, setEditName] = useState(false);\r\n\r\n  // useEffect(() => {\r\n  //   async function fetch() {\r\n  //     try {\r\n  //       if (idx) {\r\n  //         const res = JSON.parse(localStorage.getItem('USER'));\r\n  //         const dec = await idx.ceramic.did.decryptDagJWE(res.aesKey);\r\n  //         setAesKey(dec);\r\n  //         const [addressList] = await Promise.all([\r\n  //           idx.get(definitions.portfolio, idx.id),\r\n  //         ]);\r\n  //         console.log(addressList);\r\n  //         if (addressList) {\r\n  //           const decryptedData = await decryptData(\r\n  //             Buffer.from(addressList.portfolio, 'hex'),\r\n  //             dec\r\n  //           );\r\n  //           console.log(JSON.parse(decryptedData.toString('utf8')));\r\n  //           addressList\r\n  //             ? setAddress(JSON.parse(decryptedData.toString('utf8')))\r\n  //             : setAddress([]);\r\n  //         } else {\r\n  //           setAddress([]);\r\n  //         }\r\n  //       }\r\n  //     } catch (err) {\r\n  //       console.log(err);\r\n  //     }\r\n  //   }\r\n  //   fetch();\r\n  // }, [idx]);\r\n\r\n  // const addAddress = async (newAddress) => {\r\n  //   setLoading(true);\r\n  //   setModal(false);\r\n  //   const newAddresses = [...addressArray, newAddress];\r\n\r\n  //   const encryptedData = await encryptData(\r\n  //     Buffer.from(JSON.stringify(newAddresses)),\r\n  //     aesKey\r\n  //   );\r\n  //   console.log(encryptedData);\r\n  //   setAddress(newAddresses);\r\n  //   const docId = await idx.set(definitions.portfolio, {\r\n  //     portfolio: encryptedData.toString('hex'),\r\n  //   });\r\n  //   localStorage.setItem('docId', docId.toString());\r\n  //   setLoading(false);\r\n  // };\r\n\r\n  return (\r\n    <div>\r\n      <Loader\r\n        loading={loading}\r\n        heading={'Add address'}\r\n        content={'Adding address'}\r\n      />\r\n      <AddressModal modal={modal} setModal={setModal} addAddress={addAddress} />\r\n      <EditProfile\r\n        editName={editName}\r\n        setEditName={setEditName}\r\n        email={userData.email}\r\n      />\r\n\r\n      <div className={classes.root}>\r\n        {userData ? (\r\n          <div className={classes.content}>\r\n            <Avatar\r\n              alt='Your Avatar'\r\n              className={classes.avatar}\r\n              src='/assets/avatar.png'\r\n            />\r\n            <div className={classes.name}>\r\n              <div className={classes.title}>\r\n                <Text h2 className={classes.username}>\r\n                  {userData.name}\r\n                </Text>\r\n                <div>\r\n                  <Button\r\n                    className={classes.editProfile}\r\n                    type='primary'\r\n                    auto\r\n                    icon={<Icons.Edit />}\r\n                    onClick={() => setEditName(true)}\r\n                  >\r\n                    Edit Profile\r\n                  </Button>\r\n                  <Button\r\n                    className={classes.createProjectButton}\r\n                    type='secondary'\r\n                    auto\r\n                    icon={<Icons.Plus />}\r\n                    onClick={() => setModal(true)}\r\n                  >\r\n                    Add New Address\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                  <Icons.Mail size={16} aria-label='Email' />\r\n                  <Text className={classes.integrationsUsername}>\r\n                    {userData.email}\r\n                  </Text>\r\n                </div>\r\n                <Link\r\n                  href='https://github.com/consensolabs'\r\n                  target='_blank'\r\n                  rel='noopener'\r\n                  underline\r\n                >\r\n                  <div style={{ display: 'flex', alignItems: 'center' }}></div>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <Row style={{ padding: '10px 0' }}>\r\n            :<Text> No user data found</Text>\r\n          </Row>\r\n        )}\r\n\r\n        <div\r\n          className={classes.heading}\r\n          style={{\r\n            marginBottom: '0px',\r\n            height: '0px',\r\n            background: 'red',\r\n            marginTop: '18px',\r\n          }}\r\n        >\r\n          <Text h4 className={classes.username}>\r\n            My Portfolio Accounts\r\n          </Text>\r\n        </div>\r\n        <div className={classes.content}>\r\n          <div className={classes.projects}>\r\n            {addressArray.length > 0 ? (\r\n              addressArray.map((add, index) => {\r\n                console.log(add);\r\n                return (\r\n                  <ProfileCard\r\n                    address={add.address}\r\n                    name={add.chain}\r\n                    addAddress={addAddress}\r\n                    key={index}\r\n                  />\r\n                );\r\n              })\r\n            ) : (\r\n              <Row style={{ padding: '10px 0' }}>\r\n                {/* <Image\r\n                    src='/assets/notFound.svg'\r\n                    alt='No Portfolios Found'\r\n                    width={350}\r\n                  /> */}\r\n\r\n                <Text>No Portfolios Found</Text>\r\n              </Row>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}